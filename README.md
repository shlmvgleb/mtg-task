# Тестовое от "МТГ. Бизнес-решения"

# Текст задания
1. Создать БД PostgreSQL или Firebird, или MS SQL, не суть. В БД создать таблицу из 4-5 полей. Должны быть строковые и числовые поля. Заполнить таблицу произвольными данными, не менее 5000 строк.
2. Разработать клиент-серверное приложение (по факту 2 приложения клиент и север). На форме клиента должна быть кнопка при нажатии на которую клиент запрашивает данные. После получения запроса сервер обращается в БД и передаёт данные на клиент.
3. Клиент получает данные в одном потоке и передаёт для записи в файл в другой поток. Данные из потока в поток передаются построчно.
4. Все запросы пишутся в один и тот же файл.
5. Нажатие на кнопку не должно замораживать клиент. Должна быть возможность запустить еще один запрос при выполнении других запросов.

Необходимо создать приложение-клиент на сокетах, которая просто шлет бесконечно из разных потоков (число потоков указывается на форме) данные на сервер вида 1234567890 (блоками от 1000 до 10000 байт рандомного размера), но перед этим кодирует их в Base64.

Приложение сервер простое, оно принимает эти данные и пишет в базу. где Socket клиента - это ID. То есть в базе таблица из двух полей ID (Socket - handle сокета), и Data там данные которые приходят. Но перед тем как записать данные, оно декодирует их из Base64. Сервер консольный и выводит в консоль - клиент подключился, клиент отключился, пришли новые данные (тут посмотреть как будет работать между потоками и главным потоком). Клиентов может быть много.

Внешний вид на ваш вкус.

# Tech documenation

## Build
Создайте переменные окружения для приложений
```bash
cp .env.example .env
```

Каждое приложение можно сбилдить и запустить при помощи Makefile'ов
```bash
make build
make run
```

## Dependencies
```bash
go mod tidy
```

## Start from shell
```bash
./client/bin/app
./server/bin/app
```


## Docker
```bash
docker-compose up --build -d
```

## Client app link
Ссылка на форму с заполнением количества потоков
http://${your_host}:${CLIENT_PORT}/

# Environment

| env                         | default value          | description                                |
|:----------------------------|:-----------------------|:-------------------------------------------|
| CLIENT_PORT                 | 3004                   | Client app port                            |
| SERVER_PORT                 | 3003                   | Server app port                            |
| SERVER_HOST                 | localhost              | Server app host                            |
| POSTGRES_HOST               | localhost              | Postgres host                              |
| POSTGRES_PORT               | 5742                   | Postgres port                              |
| POSTGRES_DB_NAME            | core                   | Postgres database name                     |
| POSTGRES_USER               | postgres               | Postgres user                              |
| POSTGRES_PWD                | root                   | Postgres password                          |
